---
title: "Descriptive_Stats"
author: "Owen Fiore"
date: "2023-05-21"
output: pdf_document
---

The code below reads in the data comparing the 2022 National Competitions to the 2022
World Championships.
```{r}
national <- read.csv("../Data/ClusrankNatvsWorld.csv")
colnames(national) <- c("Time", "Athlete", "Stage")
```


The code below performs two clustered Wilcox tests, the first one without using
exact = True, and the second one with exact = True and 10,000 random
permutations. The tests compare the times and group by the Stage of the
competition which in the data is coded as 1 if it was a national championship
and 2 if it was the world championships. The tests cluster by athlete, of which
for each dataset an integer from 1-11 is used (the values are not significant).
For more information about the "ds" method, please look at the Rank-based
Comparison subsection of the Methods section of the paper or at this link here:
https://www.jstatsoft.org/article/view/v096i06.  The second test also includes
exact = TRUE which is used when sample sizes are small (as they are in this
case), additionally the number of random permutations (B) is set to be 10,000.

```{r}
set.seed(1)
library(clusrank)
clusWilcox.test(Time, group=Stage, cluster = Athlete, data = national,
                method = "ds")

clusWilcox.test(Time, group=Stage, cluster = Athlete, data = national,
                method = "ds",
                exact = TRUE, B = 1000000)
```

The code below reads in the data comparing the 2019 and 2022 World Championships.
```{r}
old_clusrank <- read.csv("../Data/Clusrank2019vs2022.csv")
#"C:\Users\ofior\Documents\Thesis\Data\2019vs2022.csv"
colnames(old_clusrank) <- c("Time", "Athlete", "Year")
#View(comp)
```


The tests below are very similar to the ones above, the only difference being
grouping by Year instead of Stage (1 if 2019 and 2 if 2022).
```{r}
set.seed(1)
library(clusrank)
clusWilcox.test(Time, group=Year, cluster = Athlete, data = old_clusrank,
                method = "ds")

clusWilcox.test(Time, group=Year, cluster = Athlete, data = old_clusrank,
                method = "ds",
                exact = TRUE, B = 1000000)
```


The code below reads in data comparing the 2022 and 2023 World Championships
```{r}
new_clusrank <- read.csv("../Data/Clusrank2022vs2023.csv")
#"C:\Users\ofior\Documents\Thesis\Data\2019vs2022.csv"
colnames(new_clusrank) <- c("Time", "Athlete", "Year")
#View(comp)
```


The tests below are very similar to the ones above, the only difference being
grouping by Year instead of Stage (2 if 2022 and 3 if 2023).
```{r}
set.seed(1)
library(clusrank)
clusWilcox.test(Time, group=Year, cluster = Athlete, data = new_clusrank,
                method = "ds")

clusWilcox.test(Time, group=Year, cluster = Athlete, data = new_clusrank,
                method = "ds",
                exact = TRUE, B = 1000000)
```

This is seeing what would happen if we remove prelims, the sample sizes in the
test become very small: 26 observations and 9 clusters.
```{r}
nations_noprelim <- read.csv("../Data/Clusrank2019vs2022PrelimsOnly.csv")
colnames(nations_noprelim) <- c("Time", "Athlete", "Year")
``` 

```{r}
library(clusrank)
clusWilcox.test(Time, group=Year, cluster = Athlete, data = nations_noprelim,
                method = "ds")
clusWilcox.test(Time, group=Year, cluster = Athlete, data = nations_noprelim,
                method = "ds", 
                exact = TRUE, B = 10000)
```

```{r}
women_data <- read.csv("../Data/WomenClusrank2019vs2022.csv")
colnames(women_data) <- c("Time", "Athlete", "Year")
```

```{r}
set.seed(1)
library(clusrank)
clusWilcox.test(Time, group=Year, cluster = Athlete, data = women_data,
                method = "ds")
clusWilcox.test(Time, group=Year, cluster = Athlete, data = women_data,
                method = "ds", 
                exact = TRUE, B = 1000000)
```

